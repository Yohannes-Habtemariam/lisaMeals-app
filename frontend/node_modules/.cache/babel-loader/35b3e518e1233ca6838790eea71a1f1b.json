{"ast":null,"code":"import _objectSpread from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect}from'react';import'./mostPopularDishesSection.scss';import ReactStars from'react-rating-stars-component';import{MyContext}from'../../../App.js';import{useNavigate}from'react-router-dom';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MostPopularDishesSection(){var _useContext=useContext(MyContext),cart=_useContext.cart,token=_useContext.token,isLoggedIn=_useContext.isLoggedIn,setCart=_useContext.setCart;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),featuredMeals=_useState2[0],setFeaturedMeals=_useState2[1];useEffect(function(){selectMeals();},[]);var selectMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var settings,response,parsedRes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:settings={method:'GET',headers:{'Content-Type':'application/json',Authorization:'Bearer '+token}};_context.next=3;return fetch(process.env.REACT_APP_SERVER_URL+'/landingPage/meals/featured',settings);case 3:response=_context.sent;_context.next=6;return response.json();case 6:parsedRes=_context.sent;_context.prev=7;if(!response.ok){_context.next=12;break;}setFeaturedMeals(parsedRes.featured);_context.next=13;break;case 12:throw new Error(parsedRes.message);case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);alert(_context.t0.message);case 18:case\"end\":return _context.stop();}}},_callee,null,[[7,15]]);}));return function selectMeals(){return _ref.apply(this,arguments);};}();var addToCart=function addToCart(meal){var item=cart.find(function(elem){return elem._id===meal._id;});if(!isLoggedIn){alert('Please login');navigate('/login');}else{if(item){item.quantity+=1;setCart(_toConsumableArray(cart));}else{if(cart.length+1>3){alert('Reached Maximum Quantity of Meals');return;}setCart([].concat(_toConsumableArray(cart),[_objectSpread(_objectSpread({},meal),{},{quantity:1})]));}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"mostPopularDishesSection\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Try our most popular dishes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cardsContainer\",children:featuredMeals.map(function(meal){return/*#__PURE__*/_jsxs(\"div\",{className:\"card card1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[' ',/*#__PURE__*/_jsx(\"img\",{className:\"cardImg\",src:meal.img,width:\"300\",alt:\"\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:meal.mealName}),/*#__PURE__*/_jsx(\"p\",{children:meal.description}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20AC \",meal.price]})}),/*#__PURE__*/_jsx(ReactStars,{count:5,value:meal.rating,size:24,isHalf:true,activeColor:\"yellow\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addToCart(meal);},children:\"Add To Cart\"})})]},meal._id);})})]});}","map":{"version":3,"names":["React","useContext","useEffect","ReactStars","MyContext","useNavigate","useState","MostPopularDishesSection","cart","token","isLoggedIn","setCart","navigate","featuredMeals","setFeaturedMeals","selectMeals","settings","method","headers","Authorization","fetch","process","env","REACT_APP_SERVER_URL","response","json","parsedRes","ok","featured","Error","message","alert","addToCart","meal","item","find","elem","_id","quantity","length","map","img","mealName","description","price","rating"],"sources":["/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/src/components/landingPageComponents/mostPopularDishesSection/MostPopularDishesSection.jsx"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport './mostPopularDishesSection.scss';\nimport ReactStars from 'react-rating-stars-component';\nimport { MyContext } from '../../../App.js';\nimport { useNavigate } from 'react-router-dom';\nimport { useState } from 'react';\n\nexport default function MostPopularDishesSection() {\n  const { cart, token, isLoggedIn, setCart } = useContext(MyContext);\n  const navigate = useNavigate();\n  const [featuredMeals, setFeaturedMeals] = useState([]);\n\n  useEffect(() => {\n    selectMeals();\n  }, []);\n  \n  const selectMeals = async () => {\n    const settings = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + token,\n      },\n    };\n\n    const response = await fetch(\n      process.env.REACT_APP_SERVER_URL + '/landingPage/meals/featured',\n      settings\n    );\n    const parsedRes = await response.json();\n    try {\n      if (response.ok) {\n        setFeaturedMeals(parsedRes.featured);\n      } else {\n        throw new Error(parsedRes.message);\n      }\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n\n  const addToCart = (meal) => {\n    let item = cart.find((elem) => elem._id === meal._id);\n\n    if (!isLoggedIn) {\n      alert('Please login');\n      navigate('/login');\n    } else {\n      if (item) {\n        item.quantity += 1;\n        setCart([...cart]);\n      } else {\n        if (cart.length + 1 > 3) {\n          alert('Reached Maximum Quantity of Meals');\n          return;\n        }\n        setCart([...cart, { ...meal, quantity: 1 }]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"mostPopularDishesSection\">\n      <h2> Try our most popular dishes</h2>\n\n      <div className=\"cardsContainer\">\n        {featuredMeals.map((meal) => {\n          return (\n            <div key={meal._id} className=\"card card1\">\n              <div >\n                {' '}\n                <img className=\"cardImg\"src={meal.img} width=\"300\" alt=\"\" />\n              </div>\n              <h3>{meal.mealName}</h3>\n              <p>{meal.description}</p>\n              <h3>\n                <strong>â‚¬ {meal.price}</strong>\n              </h3>\n              <ReactStars\n                count={5}\n                value={meal.rating}\n                size={24}\n                isHalf={true}\n                activeColor=\"yellow\"\n              />\n              <div>\n                <button onClick={() => addToCart(meal)}>Add To Cart</button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
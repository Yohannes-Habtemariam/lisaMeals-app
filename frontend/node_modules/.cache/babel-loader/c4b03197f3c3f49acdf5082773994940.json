{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useContext}from\"react\";import{MyContext}from\"../../App\";import{useNavigate}from\"react-router-dom\";import\"./registerPage.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(props){var _useContext=useContext(MyContext),setUser=_useContext.setUser,token=_useContext.token;var navigate=useNavigate();var _useState=useState({firstName:\"\",lastName:\"\",email:\"\",password:\"\",confirmPassword:\"\",phone:\"\",street:\"\",houseNo:\"\",zipCode:\"\",city:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserdata=_useState2[1];var firstName=userData.firstName,lastName=userData.lastName,email=userData.email,password=userData.password,confirmPassword=userData.confirmPassword,phone=userData.phone,street=userData.street,houseNo=userData.houseNo,zipCode=userData.zipCode,city=userData.city;var updateData=function updateData(event){setUserdata(_objectSpread(_objectSpread({},userData),{},_defineProperty({},event.target.name,event.target.value)));};var registerUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var settings,response,parsedRes,now,tokenExpiry;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();settings={method:\"POST\",body:JSON.stringify(userData),headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+token}};console.log(process.env.REACT_APP_SERVER_URL);_context.next=5;return fetch(process.env.REACT_APP_SERVER_URL+\"/register\",settings);case 5:response=_context.sent;_context.next=8;return response.json();case 8:parsedRes=_context.sent;_context.prev=9;if(!response.ok){_context.next=18;break;}// Dealing with token expiry \nnow=new Date();tokenExpiry=new Date(now.getTime()+1000*60*60);localStorage.setItem(\"data\",JSON.stringify({token:parsedRes.token,id:parsedRes.id,expiry:tokenExpiry.toISOString()}));// if the response is okay, send data to backend\nsetUser(parsedRes.token,parsedRes.id);navigate(\"/login\");_context.next=19;break;case 18:throw new Error(parsedRes.message);case 19:_context.next=24;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](9);alert(_context.t0.message);case 24:case\"end\":return _context.stop();}}},_callee,null,[[9,21]]);}));return function registerUser(_x){return _ref.apply(this,arguments);};}();// const updateShowLogin = () =>\n// {\n//   props.setShowLogin( true );\n// };\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"registerPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"New users get 50% off!\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Sign-up for a free account\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:registerUser,className:\"registerForm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputLeft\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contact information:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",onChange:updateData,value:firstName,placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",onChange:updateData,value:lastName,placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",onChange:updateData,value:email,placeholder:\"Email address\",type:\"email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",onChange:updateData,value:password,placeholder:\"Create Password\",type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",onChange:updateData,value:confirmPassword,placeholder:\"Confirm Password\",type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",onChange:updateData,value:phone,placeholder:\"Phone Number\",type:\"tel\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputRight\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"street\",onChange:updateData,value:street,placeholder:\"Street\",type:\"text\"}),/*#__PURE__*/_jsx(\"input\",{name:\"houseNo\",onChange:updateData,value:houseNo,placeholder:\"House No.\",text:\"text\"}),/*#__PURE__*/_jsx(\"input\",{name:\"zipCode\",onChange:updateData,value:zipCode,placeholder:\"Zip Code\",type:\"number\"}),/*#__PURE__*/_jsx(\"input\",{name:\"city\",onChange:updateData,value:city,placeholder:\"City\",type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{className:\"Register feButton\",children:\"Register\"})]})]})]})});};export default Register;","map":{"version":3,"names":["React","useState","useContext","MyContext","useNavigate","Register","props","setUser","token","navigate","firstName","lastName","email","password","confirmPassword","phone","street","houseNo","zipCode","city","userData","setUserdata","updateData","event","target","name","value","registerUser","preventDefault","settings","method","body","JSON","stringify","headers","console","log","process","env","REACT_APP_SERVER_URL","fetch","response","json","parsedRes","ok","now","Date","tokenExpiry","getTime","localStorage","setItem","id","expiry","toISOString","Error","message","alert"],"sources":["/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/src/views/registerpage/RegisterPage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useContext } from \"react\";\nimport { MyContext } from \"../../App\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./registerPage.scss\";\n\nconst Register = (props) => {\n  const { setUser, token } = useContext(MyContext);\n  let navigate = useNavigate();\n\n  const [userData, setUserdata] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    phone:\"\",\n    street: \"\",\n    houseNo: \"\",\n    zipCode: \"\",\n    city: \"\",\n  });\n\n  const {\n    firstName,\n    lastName,\n    email,\n    password,\n    confirmPassword,\n    phone,\n    street,\n    houseNo,\n    zipCode,\n    city,\n  } = userData;\n\n  const updateData = (event) => {\n    setUserdata({ ...userData, [event.target.name]: event.target.value });\n  };\n\n  const registerUser = async (event) => {\n    event.preventDefault();\n\n    const settings = {\n      method: \"POST\",\n      body: JSON.stringify(userData),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + token\n\n      },\n    };\n    console.log(process.env.REACT_APP_SERVER_URL);\n    const response = await fetch(\n      process.env.REACT_APP_SERVER_URL + \"/register\",\n      settings\n    );\n    const parsedRes = await response.json();\n    try {\n      if (response.ok) {\n        // Dealing with token expiry \n        const now = new Date();\n        const tokenExpiry = new Date(now.getTime() + 1000 * 60 * 60); \n        localStorage.setItem(\"data\", JSON.stringify({token: parsedRes.token, id: parsedRes.id, expiry: tokenExpiry.toISOString()}));\n        // if the response is okay, send data to backend\n        setUser(parsedRes.token, parsedRes.id)\n        navigate(\"/login\");\n      } else {\n        throw new Error(parsedRes.message);\n      }\n    } catch (err) {\n      alert(err.message);\n    }\n  };\n  // const updateShowLogin = () =>\n  // {\n  //   props.setShowLogin( true );\n  // };\n\n  return (\n    <div className=\"registerPage\">\n      <div className=\"formContainer\">\n        <h1>New users get 50% off!</h1>\n        <h2>Sign-up for a free account</h2>\n        <form onSubmit={registerUser} className={\"registerForm\"}>\n          <div className=\"inputLeft\">\n            <label>Contact information:</label>\n\n            <input\n              name=\"firstName\"\n              onChange={updateData}\n              value={firstName}\n              placeholder={\"First Name\"}\n            />\n            <input\n              name=\"lastName\"\n              onChange={updateData}\n              value={lastName}\n              placeholder={\"Last Name\"}\n            />\n\n            <input\n              name=\"email\"\n              onChange={updateData}\n              value={email}\n              placeholder={\"Email address\"}\n              type={\"email\"}\n            />\n            <input\n              name=\"password\"\n              onChange={updateData}\n              value={password}\n              placeholder={\"Create Password\"}\n              type={\"password\"}\n            />\n            {/* to check the match Create Password and Confirm password */}\n            <input\n              name=\"confirmPassword\"\n              onChange={updateData}\n              value={confirmPassword}\n              placeholder={\"Confirm Password\"}\n              type={\"password\"}\n            />\n            <input\n              name=\"phone\"\n              onChange={updateData}\n              value={phone}\n              placeholder={\"Phone Number\"}\n              type={\"tel\"}\n            />\n          </div>\n\n          <div className=\"inputRight\">\n            <label>Address:</label>\n            <input\n              name=\"street\"\n              onChange={updateData}\n              value={street}\n              placeholder={\"Street\"}\n              type={\"text\"}\n            />\n            <input\n              name=\"houseNo\"\n              onChange={updateData}\n              value={houseNo}\n              placeholder={\"House No.\"}\n            text={\"text\"}\n            />\n            <input\n              name=\"zipCode\"\n              onChange={updateData}\n              value={zipCode}\n              placeholder={\"Zip Code\"}\n              type={\"number\"}\n\n            />\n            <input\n              name=\"city\"\n              onChange={updateData}\n              value={city}\n              placeholder={\"City\"}\n              type={\"text\"}\n\n            />\n            <button className=\"Register feButton\">Register</button>\n          </div>\n        </form>\n        {/* <button onClick={ updateShowLogin }>Already registered? Log in to your account!</button> */}\n      </div>\n\n      {/* <div className=\"goToRegisterSection\">\n    <h1>New Users get 50% off !</h1>\n\n    </div> */}\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useContext}from\"react\";import{MyContext}from\"../../App\";import ReactStars from\"react-rating-stars-component\";import DeregisterUser from\"../../components/DeregisterUser\";import{useNavigate}from'react-router-dom';import UserData from\"../../components/UserData\";import TotalOrder from\"../../components/TotalOrder\";import TotalOrderPerCustomer from\"../../components/TotalOrderPerCustomer\";import\"./mealsPage.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MealsPage=function MealsPage(){var _useContext=useContext(MyContext),meals=_useContext.meals,user=_useContext.user,cart=_useContext.cart,setCart=_useContext.setCart,isLoggedIn=_useContext.isLoggedIn,deleteUserAccount=_useContext.deleteUserAccount,isAdmin=_useContext.isAdmin,token=_useContext.token;var navigate=useNavigate();var addToCart=function addToCart(meal){var item=cart.find(function(elem){return elem._id===meal._id;});if(!isLoggedIn){alert(\"Please login\");navigate(\"/login\");}else{if(item){item.quantity+=1;setCart(_toConsumableArray(cart));}else{if(cart.length+1>3){alert('Reached Maximum Quantity of Meals');return;}setCart([].concat(_toConsumableArray(cart),[_objectSpread(_objectSpread({},meal),{},{quantity:1})]));}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[isAdmin&&/*#__PURE__*/_jsx(DeregisterUser,{token:token,userId:user.id,deleteUserAccount:deleteUserAccount}),isAdmin&&/*#__PURE__*/_jsx(UserData,{token:token,userId:user.id}),isAdmin&&/*#__PURE__*/_jsx(TotalOrder,{token:token,userId:user.id}),isAdmin&&/*#__PURE__*/_jsx(TotalOrderPerCustomer,{token:token,userId:user.id})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Select 3 meals and proceed to cart for checkout\"}),/*#__PURE__*/_jsx(\"div\",{className:\"meals-container\",children:meals.map(function(meal){return/*#__PURE__*/_jsxs(\"div\",{className:\"meal\",children:[/*#__PURE__*/_jsx(\"img\",{src:meal.img,width:\"300\",alt:\"\"}),/*#__PURE__*/_jsx(\"h2\",{children:meal.mealName}),/*#__PURE__*/_jsx(\"p\",{children:meal.description}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20AC \",meal.price]})}),/*#__PURE__*/_jsx(ReactStars,{count:5,value:meal.rating,size:24,isHalf:true,activeColor:\"green\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addToCart(meal);},children:\"Add To Cart\"})})]},meal._id);})})]});};export default MealsPage;","map":{"version":3,"names":["React","useContext","MyContext","ReactStars","DeregisterUser","useNavigate","UserData","TotalOrder","TotalOrderPerCustomer","MealsPage","meals","user","cart","setCart","isLoggedIn","deleteUserAccount","isAdmin","token","navigate","addToCart","meal","item","find","elem","_id","alert","quantity","length","id","map","img","mealName","description","price","rating"],"sources":["/home/user/Desktop/myProjects/lisa-supermarket-website/frontend/src/views/mealspage/MealsPage.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { MyContext } from \"../../App\";\nimport ReactStars from \"react-rating-stars-component\";\nimport DeregisterUser from \"../../components/DeregisterUser\";\nimport { useNavigate } from 'react-router-dom';\nimport UserData from \"../../components/UserData\";\nimport TotalOrder from \"../../components/TotalOrder\";\nimport TotalOrderPerCustomer from \"../../components/TotalOrderPerCustomer\";\nimport \"./mealsPage.scss\";\n\nconst MealsPage = () => {\n  const { meals, user, cart, setCart, isLoggedIn, deleteUserAccount, isAdmin, token } = useContext(MyContext);\n  const navigate = useNavigate();\n \n  const addToCart = (meal) => {\n    let item = cart.find((elem) => elem._id === meal._id);\n    \n    if(!isLoggedIn) {\n      alert(\"Please login\");\n      navigate(\"/login\")\n    } else {\n      if (item) {\n        item.quantity += 1;\n        setCart([...cart]);\n      } else {if ((cart.length +1) > 3 ){\n        alert('Reached Maximum Quantity of Meals')\n        return \n      }\n        setCart([...cart, { ...meal, quantity: 1 }]);\n      }\n    }\n    \n  };\n\n  return (\n    <div>\n      <div>\n      {isAdmin && <DeregisterUser token={token} userId={user.id} deleteUserAccount={deleteUserAccount} />}\n        {isAdmin && <UserData token={token} userId={user.id} />}\n        {isAdmin && <TotalOrder token={token} userId={user.id} />}\n        {isAdmin && <TotalOrderPerCustomer token={token} userId={user.id} />} \n      </div>\n      {/* <div>\n        <h2>Welcome {user && user.info.firstName}</h2>\n      </div>\n      <h2>Meals page</h2>  */}\n      <p>Select 3 meals and proceed to cart for checkout</p>\n      <div className=\"meals-container\">\n        {meals.map((meal) => {\n          return (\n            <div key={meal._id} className=\"meal\">\n              <img src={meal.img} width=\"300\" alt=\"\" />\n              <h2>{meal.mealName}</h2>\n              <p>{meal.description}</p>\n              <h3>\n                <strong>â‚¬ {meal.price}</strong>\n              </h3>\n              <ReactStars\n                count={5}\n                value={meal.rating}\n                size={24}\n                isHalf={true}\n                activeColor=\"green\"\n              />\n              <div>\n                <button onClick={() => addToCart(meal)}>Add To Cart</button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default MealsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}